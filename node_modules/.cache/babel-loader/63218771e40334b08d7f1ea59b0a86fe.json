{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/avinash/react/viflix/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/avinash/react/viflix/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/avinash/react/viflix/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from\"../axios\";import YouTube from'react-youtube';import requests from\"../request\";import'./Banner.css';import movieTrailer from'movie-trailer';function Banner(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movie=_useState2[0],setMovie=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),trailerUrl=_useState4[0],setTrailerUrl=_useState4[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var request;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(requests.fetchTopRated);case 2:request=_context.sent;setMovie(request.data.results[Math.floor(Math.random()*request.data.results.length-1)]);return _context.abrupt(\"return\",request);case 5:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[requests.fetchTopRated]);function truncate(str,n){return(str===null||str===void 0?void 0:str.length)>n?str.substr(0,n-1)+\"...\":str;}var opts={height:\"390\",width:\"100%\"// playerVars:{\n//     autoplay :1,\n// },\n};var handleClick=function handleClick(movie){console.log(\"hey\");if(trailerUrl){setTrailerUrl('');}else{movieTrailer((movie===null||movie===void 0?void 0:movie.name)||(movie===null||movie===void 0?void 0:movie.title)||(movie===null||movie===void 0?void 0:movie.original_name)||\"\").then(function(url){var urlParams=new URLSearchParams(new URL(url).search);setTrailerUrl(urlParams.get('v'));}).catch(function(error){return console.log(error);});}};return/*#__PURE__*/_jsxs(\"header\",{className:\"banner\",style:{backgroundSize:\"cover\",backgroundImage:\"url(\\\"https://image.tmdb.org/t/p/original/\".concat(movie===null||movie===void 0?void 0:movie.backdrop_path,\"\\\")\"),backgroundPosition:\"center center\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"banner__content\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"banner__title\",children:(movie===null||movie===void 0?void 0:movie.title)||(movie===null||movie===void 0?void 0:movie.name)||(movie===null||movie===void 0?void 0:movie.original_name)}),/*#__PURE__*/_jsx(\"div\",{className:\"banner__buttons\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"banner__description\",children:truncate(movie===null||movie===void 0?void 0:movie.overview,150)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"banner__fadeBottom\"})]});}export default Banner;","map":{"version":3,"sources":["/home/avinash/react/viflix/src/components/Banner.js"],"names":["React","useState","useEffect","axios","YouTube","requests","movieTrailer","Banner","movie","setMovie","trailerUrl","setTrailerUrl","fetchData","get","fetchTopRated","request","data","results","Math","floor","random","length","truncate","str","n","substr","opts","height","width","handleClick","console","log","name","title","original_name","then","url","urlParams","URLSearchParams","URL","search","catch","error","backgroundSize","backgroundImage","backdrop_path","backgroundPosition","overview"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport axios from \"../axios\";\nimport YouTube from 'react-youtube';\nimport requests from \"../request\";\nimport './Banner.css';\nimport movieTrailer from 'movie-trailer';\n\nfunction Banner() {\n    const [movie,setMovie]=useState([]);\n    const [trailerUrl,setTrailerUrl]=useState(\"\");\n    useEffect(() => {\n        async function fetchData(){\n            const request=await axios.get(requests.fetchTopRated);\n            setMovie(\n                request.data.results[Math.floor(Math.random() * request.data.results.length-1)]\n            );\n            return request;\n        }fetchData();\n    }, [requests.fetchTopRated]);\n\n    function truncate(str,n){\n        return str?.length >n ? str.substr(0,n-1)+\"...\":str;\n    }\n    const opts={\n        height: \"390\",\n        width: \"100%\",\n        // playerVars:{\n        //     autoplay :1,\n        // },\n    }\n    const handleClick = (movie) => {\n        console.log(\"hey\");\n        if(trailerUrl){\n            setTrailerUrl('');\n        }\n        else{\n            movieTrailer(movie?.name||movie?.title||movie?.original_name||\"\")\n            .then((url) => {\n                const urlParams=new URLSearchParams(new URL(url).search);\n                setTrailerUrl(urlParams.get('v'));\n            }).catch((error)=>console.log(error));\n        }\n    }\n    return (\n        <header className=\"banner\"\n        style={{\n            backgroundSize:\"cover\",\n            backgroundImage:`url(\"https://image.tmdb.org/t/p/original/${movie?.backdrop_path}\")`,\n            backgroundPosition: \"center center\",\n        }}\n        >\n          \n            <div className=\"banner__content\">\n                <h1 className=\"banner__title\">\n            {movie?.title || movie?.name || movie?.original_name}\n                </h1>\n            <div className=\"banner__buttons\">\n             {/* <button onClick={()=> handleClick(movie)} className=\"banner__button\">Play</button>\n             <button className=\"banner__button\">My List</button> */}\n            </div>\n            \n    <h1 className=\"banner__description\">{truncate(movie?.overview,150)}</h1>\n            </div>\n            <div className=\"banner__fadeBottom\">\n            </div>\n            \n        </header>\n    )\n}\n\nexport default Banner\n"]},"metadata":{},"sourceType":"module"}